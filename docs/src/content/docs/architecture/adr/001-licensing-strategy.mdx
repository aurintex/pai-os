---
title: "ADR-001: Licensing Strategy"
description: AGPL-3.0 for runtime, Apache-2.0 for extensions API
---

import { Aside } from '@astrojs/starlight/components';
import Mermaid from '../../../../components/Mermaid.astro';

## Status

**Accepted** (2025-03-01)

## Context

paiOS is a commercial open-source project that needs to:

1. **Protect the core runtime** from being forked without contributing back
2. **Allow proprietary extensions** for any developer or commercial partner
3. **Ensure long-term sustainability**: flexibility for future business models
4. **Maintain simplicity**: avoid "Qt licensing pain"

The runtime communicates with extensions via **gRPC over Unix Domain Sockets (IPC)**, similar to how Linux kernel syscalls create a boundary between the GPL kernel and user-space applications.

## Decision

We adopt a **"Default AGPL, with Permissive Exceptions"** model:

*   **Default:** All files are licensed under **AGPL-3.0** (per root `LICENSE` file).
*   **Exception:** Subdirectories with their own `LICENSE` file override the default.

```
pai-os/
â”œâ”€â”€ LICENSE              (AGPL-3.0 = default for everything)
â”œâ”€â”€ NOTICE               (Copyright & Trademarks)
â”‚
â”‚   âœ… FREE TO USE (Apache-2.0)
â”œâ”€â”€ api/                 â† All API definitions
â”‚   â””â”€â”€ grpc/
â”œâ”€â”€ apps/                â† Your extensions go here
â”‚
â”‚   ğŸ”’ MUST SHARE CHANGES (AGPL-3.0)
â”œâ”€â”€ engine/              â† Runtime code
â”œâ”€â”€ os/
â”œâ”€â”€ scripts/
â””â”€â”€ docs/
```

### Contributor License Agreement (CLA)

We require a CLA (replacing DCO) to grant aurintex the right to:
- **Ensure long-term sustainability**: flexibility for future business models
- Maintain the project indefinitely with proper resources
- Protect the project's right to defend its trademarks

### IPC Boundary as License Boundary

The gRPC/UDS communication between runtime and extensions creates a clear **process separation**:

<Mermaid code={`flowchart TB
    subgraph ext["âœ… Your Extension"]
        ext_node["Any license you want!<br/>Proprietary, MIT, Apache, closed..."]
    end

    subgraph runtime["ğŸ”’ paiOS Runtime"]
        runtime_node["AGPL-3.0"]
    end

    ext_node -->|"gRPC over UDS<br/>(License Boundary)"| runtime_node`} />

This follows the same pattern as:
- **Linux Kernel (GPL)** + User-space apps (any license)
- **Docker Engine (Apache-2.0)** + Plugins (any license)

### Shared Memory Constraint

<Aside type="caution" title="License Boundary Warning">
The [FSF considers](https://www.gnu.org/licenses/gpl-faq.html#GPLPlugins) shared memory with complex data structures as equivalent to dynamic linking.
</Aside>

**Rule:** Shared memory may only be used for raw byte buffers (images, audio PCM). Control signals and handles must go through gRPC.

## Consequences

### Positive

- âœ… Clear separation: Runtime protected, extensions open
- âœ… B2B customers can write proprietary extensions
- âœ… Apache-2.0 provides patent protection for extension developers
- âœ… CLA enables future business model flexibility
- âœ… Simple: Only 2 licenses to understand

### Negative

- âš ï¸ AGPL may deter some enterprise adopters (but this is intentional)
- âš ï¸ CLA adds friction for contributors (mitigated by CLAassistant)

## Related

- [ADR-006: Extension Architecture](./006-extension-architecture): Why we use process isolation and gRPC (including why not shared memory for control)
- [Licensing Guide](/guides/licensing): Practical FAQ for extension developers
- [NOTICE file](https://github.com/aurintex/pai-os/blob/main/NOTICE): Copyright and trademarks
